# 定义服务器配置块
server {
    # 监听 80 端口，接收 HTTP 请求
    listen 80;
    # 定义服务器名称，这里使用 localhost
    server_name localhost;

    # 定义 /api/ 路径的处理规则
    location /api/ {
        # 将请求转发到内部的 jwt-server 服务
        # 注意：jwt-server 是 Docker 网络中的服务名
        proxy_pass http://jwt-server:8080/;
        
        # 设置代理请求头，传递原始请求的主机名
        proxy_set_header Host $host;
        # 设置代理请求头，传递客户端的真实 IP 地址
        proxy_set_header X-Real-IP $remote_addr;
    }
}